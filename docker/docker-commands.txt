##### Docker and Git commands cheatsheet version 15 #####

##### Container prep commands #####

ssh -i C:\Users\david.lowe\.ssh\DA-KP-Bastion.pem ec2-user@ec2-35-170-217-54.compute-1.amazonaws.com

scp conda_env.txt docker_admin@10.0.4.174:/home/docker_admin

scp .Renviron docker_admin@10.0.4.173:/home/docker_admin

scp .ssh\id_rsa docker_admin@10.0.5.0:/home/docker_admin

ssh docker_admin@IP_ADDRESS

ssh -T git@github.com

git clone git@github.com:daines-analytics/template-latest.git

git clone git@github.com:daines-analytics/under-development.git

git clone git@github.com:daines-analytics/tabular-data-projects.git

git clone git@github.com:daines-analytics/web-scraping-projects.git

git fetch --all ; git reset --hard origin/master

openssl pkcs8 -in <KEYFILENAME> -nocrypt -topk8 -outform DER | openssl sha1 -c

cat train.csv.gz.* > ./train.csv.gz ; gzip -d train.csv.gz

##### Anaconda container commands #####

docker image build -t anaconda/nonroot:v2 .

docker container run --rm -it --env-file conda_env.txt -p 8080:8080 --name jupyter-server anaconda/nonroot:v2 /bin/bash

/opt/conda/bin/jupyter lab --ip=0.0.0.0 --port=8080 --no-browser --notebook-dir=/home/anaconda

/opt/conda/bin/jupyter notebook password (run server at least once first)

jupyter nbconvert --to html SCRIPT_NAME.ipynb

docker cp mycontainer:/home/anaconda/under-development/<folder>/<file>.ipynb ./


##### RStudio container commands #####

docker image build -t rstudio/nonroot:v2 .

docker container run --rm -e PASSWORD=rserver -p 8787:8787 --name rstudio-server rstudio/nonroot:v2

docker cp mycontainer:/home/rstudio/under-development/<folder>/<file>.Rmd ./


***** Mounted Storage Only *****
docker container run --rm -it --env-file conda_env.txt -p 8080:8080 -v c:/Users/david.lowe/docker/anaconda:/home/anaconda/local --name jupyter-server anaconda/nonroot:v2 /bin/bash


##### Docker CE Installation on CentOS #####

$ sudo yum install -y yum-utils device-mapper-persistent-data lvm2

$ sudo yum-config-manager --add-repo https://download.docker.com/linux/centos/docker-ce.repo

$ sudo yum install docker-ce docker-ce-cli containerd.io

$ sudo systemctl start docker

$ sudo systemctl enable docker

$ sudo docker run hello-world

$ sudo groupadd docker

$ sudo usermod -aG docker $USER

$ sudo yum remove docker-ce

$ sudo rm -rf /var/lib/docker

